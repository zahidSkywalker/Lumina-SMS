{% extends "base.html" %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h2 style="font-weight: 700;">My Dashboard</h2>
    <a href="{{ url_for('create_student') }}" class="btn btn-primary"><i class="fa-solid fa-plus"></i> Add New Student</a>
</div>

<div class="card-grid">
    <div class="lumina-card" style="border-left: 5px solid var(--primary);">
        <div style="color: var(--text-light); font-size: 0.9rem; text-transform: uppercase;">My Students</div>
        <div class="stat-number">{{ total }}</div>
        <div style="color: #10b981;"><i class="fa-solid fa-users"></i> Total Enrolled</div>
    </div>

    <div class="lumina-card" style="border-left: 5px solid var(--secondary);">
        <div style="color: var(--text-light); font-size: 0.9rem; text-transform: uppercase;">Average GPA</div>
        <div class="stat-number">{{ "%.2f"|format(avg) if avg != 0 else "0.00" }}</div>
        <div style="font-size: 0.9rem; color: var(--text-light);">Performance Metric</div>
    </div>

    <div class="lumina-card" style="border-left: 5px solid #fbbf24;">
        <div style="color: var(--text-light); font-size: 0.9rem; text-transform: uppercase;">Top Performer</div>
        {% if top %}
        <div class="stat-number" style="font-size: 1.5rem; line-height: 1.2;">{{ top.name }}</div>
        <div style="font-weight: 600;">GPA: {{ top.gpa }} | {{ top.course }}</div>
        {% else %}
        <div class="stat-number" style="font-size: 1.5rem; color: #94a3b8;">No Data</div>
        {% endif %}
    </div>
</div>

<div style="margin-top: 3rem; text-align: center;">
    {% if total == 0 %}
        <p style="color: var(--text-light);">You haven't added any students yet. Start by clicking the button above!</p>
    {% else %}
        <a href="{{ url_for('student_list') }}" class="btn" style="background: white; border: 1px solid #cbd5e1;">View Full List</a>
    {% endif %}
</div>
{% endblock %}
